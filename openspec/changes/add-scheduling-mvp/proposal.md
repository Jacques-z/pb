# 变更：新增排班系统最小可用版本

## 为什么
### 问题
需要一个最小但可用的排班系统，用于统一管理班次，并在班次开始前可靠触发本地提醒。

### 目标
交付一个端到端的最小可用版本，使用户能在服务端创建、修改、删除班次，在桌面客户端查看未来班次，并在班次开始前默认提前 15 分钟收到本地提醒。

## 范围内
- 单用户或基础令牌鉴权
- 班次增删改查
- 人员目录管理（服务端以 Base64 存储姓名，客户端解码展示）
- 班次通过人员 ID 关联人员
- 基于 HTTP 的 JSON 接口
- 桌面客户端：
  - 配置服务端地址与令牌
  - 查看即将到来的班次
  - 接收本地通知
  - 常驻运行，主窗口关闭后仍可触发提醒
- 服务端默认支持本机部署，同时保留远程部署可能性

## 范围外
- 复杂排班算法
- 多组织或角色权限系统
- 移动端客户端
- 云端推送通知

## 成功标准
- 创建的班次能在客户端正确显示
- 客户端展示的人员姓名正确
- 班次开始前默认提前 15 分钟触发本地通知
- 修改或删除班次后，对应提醒能被正确更新或取消

## 风险
- 不同操作系统的通知行为与权限差异较大
- 后台/托盘行为因平台而异，若完全退出应用则提醒可能无法触发
- 时区处理与系统时间漂移可能导致提醒时间不准确
- 远程部署引入网络延迟与数据滞后风险

## 默认假设与可替代项（非绑定）
- 服务端形态：单进程 HTTP JSON 服务（默认）。可替代：多进程或托管服务。
- 存储：嵌入式本地数据库（默认）。可替代：文件存储或远程关系型数据库。
- 桌面运行时：Tauri（默认，跨平台，支持后台/托盘与系统通知）。可替代：其他桌面框架或原生应用。
- 同步策略：客户端轮询（默认）。可替代：长连接或事件流。
- 鉴权：共享令牌（默认）。可替代：基础用户名/密码。

## 规格大纲
- manage-people（人员管理）：人员增删改查、姓名 Base64 存储
- manage-shifts（班次管理）：HTTP JSON 班次增删改查、人员 ID 关联、班次时间格式、令牌鉴权
- view-upcoming-shifts（班次查看）：客户端连接配置、即将到来的班次列表、同步频率
- schedule-local-reminders（本地提醒）：默认提前 15 分钟、本地通知调度、变更时更新/取消、后台交付

## 变更内容
- 引入支持人员管理与班次管理的服务端接口（含基础鉴权）
- 人员姓名在服务端保存为 Base64 编码，客户端解码展示
- 班次通过人员 ID 关联，响应中返回人员 ID 与姓名
- 提供桌面客户端用于配置连接并查看即将到来的班次
- 调度并交付班次开始前的本地通知

## 影响范围
- 新增规格：manage-people、manage-shifts、view-upcoming-shifts、schedule-local-reminders
- 现有代码无影响（绿地实现）

## 任务
详见本变更目录下的任务清单。
