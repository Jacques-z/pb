# 变更：日历化排班视图

## Why
现有班次管理以列表与表单为主，难以直观看到排班分布与时间冲突，创建新班次也缺少“可视化拖动”的直觉交互。

## 目标
- 在桌面客户端新增日/周/月排班日历视图，直观看到排班情况。
- 支持在日历中创建新班次，并通过拖动左右端点调整起止时间。
- 支持查看过去班次但在视图中保持只读。

## What Changes
- 在班次管理模块新增日历视图与日/周/月切换。
- 新增“新建”按钮的可视化创建流程（草稿条 + 端点拖动 + 人员选择浮层）。
- 扩展班次列表接口支持按时间范围查询，以支持历史区间查看。

## 范围内（In scope）
- 日历视图：日/周/月切换，默认展示全部人员，可切换筛选。
- 月视图只读；过去时间段只读。
- 新建班次：点击新建生成可拖动左右端点的草稿条。
- 人员选择：在条区域旁显示浮动选择框，支持滚轮切换人员。
- 班次列表接口支持时间范围查询（允许返回过去班次）。

## 范围外（Out of scope）
- 拖拽移动整个班次条（仅允许拖动端点）。
- 复杂冲突检测与自动排班算法。
- 统计报表、打印排版、导出。
- 移动端日历交互。

## 验收标准（Success criteria）
- 日历视图可在日/周/月之间切换，并正确显示班次。
- 月视图与过去时间段只读，无法创建或调整班次。
- 点击新建后出现可拖动端点的草稿条，并可通过滚轮选择人员。
- 日/周视图中拖动端点后保存可创建/更新班次。
- 班次列表接口可按时间范围返回历史班次。

## 风险
- 日历交互复杂度较高，拖动与时间映射需谨慎处理。
- 历史区间数据量增大可能影响加载性能。
- 交互过多可能影响可用性，需要明确的提示与状态。

## 技术选型（默认假设 + 可替代项）
- 默认假设：继续使用现有 Tauri v2 + Vite + Vue + TypeScript + DaisyUI；日历视图由前端自绘布局实现；后端扩展 /shifts 范围查询。
- 可替代项：引入轻量日历 UI 组件库；仅提供日/周视图；或将历史查看作为只读弹窗列表。

## Specs Outline
- **修改** `manage-shifts`：支持班次列表按时间范围查询（允许历史）。
- **新增** `manage-console-ui`：日历视图与交互式创建/调整规则。

## 任务概览
详见 `tasks.md`。
