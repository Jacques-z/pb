## Context
现有班次管理依赖列表与表单，缺少可视化的时间分布视图；用户希望在日历视图中完成创建与调整，同时仍保持权限与 API 规则一致。

## Goals / Non-Goals
- Goals:
  - 日/周/月视图展示班次分布，默认展示全部人员并支持筛选。
  - 日/周视图支持创建草稿条与端点拖动调整时间。
  - 月视图与过去时间段保持只读。
  - 后端支持按时间范围获取班次以覆盖历史查看。
- Non-Goals:
  - 拖动移动整个班次条。
  - 自动冲突检测或排班算法。
  - 打印、导出、复杂统计。

## Decisions
- 视图结构：在“班次管理”中新增日历视图模式切换（列表/日/周/月）。
- 数据范围：日/周/月视图按当前视图范围请求班次数据，使用 /shifts 的 start_at/end_at 查询参数。
- 交互规则：
  - 新建生成草稿条并显示左右端点；仅允许拖动端点，不支持拖动整体。
  - 草稿条旁显示人员选择浮层，支持滚轮切换人员。
  - 草稿需显式保存后才写入服务端。
- 只读范围：月视图全部只读；过去时间段的班次条仅展示不可编辑。

## Risks / Trade-offs
- 拖动交互与时间映射易出错，需要明确的视觉反馈与最小化状态。
- 视图范围扩大可能导致一次请求数据较多，需考虑后续分页或懒加载。
- 草稿保存流程若不清晰可能造成误操作，需要明确的状态提示。

## Migration Plan
- 纯新增功能，无数据迁移。
- 服务端范围查询为向后兼容扩展，默认行为保持不变。

## Open Questions
- 暂无。
