# 变更：允许编辑过去排班并标记审计日志

## 问题背景
当前日/周视图对过去时间段只读，无法补录或修正历史班次；审计日志也无法直观看出“操作发生时该班次已是过去”的记录，管理员难以快速识别补录或追溯性修改。

## 目标
- 日/周视图允许创建、更新、删除过去班次
- 审计日志在前台标记“过去班次相关操作”，删除操作一律显著标记
- 班次列表仍仅展示当前及未来班次

## 范围内
- 管理控制台日/周视图放开过去时间段的编辑能力
- 月视图继续只读
- 审计日志列表增加显著标记规则（基于 occurred_at 与班次起止时间）
- 前端侧判断与展示，不改动后端数据结构

## 范围外
- 审计日志与班次接口的后端字段/行为变更
- 新增班次详情查询接口
- 在列表视图查看历史班次

## 成功标准
- 可以在日/周视图创建、调整、删除过去班次
- 审计日志对符合规则的操作显示显著标记（删除操作始终标记）
- 班次列表仍只展示当前及未来班次

## 风险
- 审计日志标记依赖前端可用的班次起止时间数据，可能需要额外加载范围以确保判定准确
- 允许修改过去班次可能影响提醒或统计的理解，需要在 UI 中清晰区分“过去操作”

## 技术选型（默认假设 + 可替代项）
- 默认假设：仅前端判断，基于现有 /audit-logs 与 /shifts 列表数据进行标记，删除操作直接标红
- 可替代项：后端在审计日志中记录 start_at/end_at 或新增 /shifts/:id 查询接口，前端直接使用

## Specs Outline
- 修改 `manage-console-ui`
  - 调整“日历排班视图”以允许过去时间段编辑
  - 新增“日历班次删除”能力
  - 新增“审计日志过去班次标记”规则
  - 明确“班次列表仅展示当前及未来班次”

## 任务概览
1. 更新 manage-console-ui 的规格增量
2. 实现日/周视图过去时间段可编辑与删除
3. 实现审计日志标记规则
4. 手工冒烟验证并补充说明
